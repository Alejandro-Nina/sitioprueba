<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Vigas</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.2/math.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora de Vigas</h1>
        
        <label for="loadType">Selecciona el tipo de carga:</label>
        <select id="loadType">
            <option value="point">Carga puntual</option>
            <option value="uniform">Carga distribuida</option>
        </select>

        <label for="length">Longitud de la viga (m):</label>
        <input type="number" id="length" value="5">

        <label for="supportType">Tipo de apoyo:</label>
        <select id="supportType">
            <option value="fixed">Fijo</option>
            <option value="roller">Rodillo</option>
            <option value="pinned">Empotrado</option>
        </select>

        <label for="loadValue">Valor de la carga (kN):</label>
        <input type="number" id="loadValue" value="10">

        <label for="position">Posición de la carga (m, desde el apoyo):</label>
        <input type="number" id="position" value="2">

        <button id="calculateBtn">Calcular</button>

        <div id="result"></div>
        <div id="graph"></div>
    </div>

    <script>
        document.getElementById('calculateBtn').addEventListener('click', function() {
            const length = parseFloat(document.getElementById('length').value);
            const loadValue = parseFloat(document.getElementById('loadValue').value);
            const position = parseFloat(document.getElementById('position').value);
            const loadType = document.getElementById('loadType').value;

            let reaction1 = 0;
            let reaction2 = 0;
            let moments = [];

            // Cálculos según tipo de carga
            if (loadType === 'point') {
                reaction1 = loadValue * (length - position) / length;
                reaction2 = loadValue * position / length;
            } else if (loadType === 'uniform') {
                const load = loadValue;
                reaction1 = load * (length / 2);
                reaction2 = load * (length / 2);
            }

            // Mostrar las reacciones en consola o en el DOM
            document.getElementById('result').innerHTML = `
                <p>Reacción en apoyo 1: ${reaction1.toFixed(2)} kN</p>
                <p>Reacción en apoyo 2: ${reaction2.toFixed(2)} kN</p>
            `;

            // Graficar la viga y los momentos
            const xValues = [...Array(101).keys()].map(i => i * length / 100);
            const momentValues = xValues.map(x => {
                return loadType === 'point' ? 
                    (reaction1 * x - loadValue * (x - position) * (x > position ? 1 : 0)) :
                    (reaction1 * x - loadValue * x);
            });

            const layout = {
                title: 'Diagrama de Momentos',
                xaxis: { title: 'Posición (m)' },
                yaxis: { title: 'Momento (kNm)' },
            };

            Plotly.newPlot('graph', [{
                x: xValues,
                y: momentValues,
                type: 'scatter',
                mode: 'lines',
                line: { color: 'blue' },
            }], layout);
        });
    </script>
</body>
</html>
