<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unir PDFs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
</head>
<body>
    <h1>Unir Archivos PDF</h1>
    <input type="file" id="pdfFiles" multiple accept="application/pdf"><br><br>
    <button id="mergeBtn">Unir PDFs</button>

    <script>
        document.getElementById('mergeBtn').addEventListener('click', async function() {
            const files = document.getElementById('pdfFiles').files;
            if (files.length === 0) {
                alert("Por favor, selecciona al menos un archivo PDF.");
                return;
            }

            const pdfDocs = [];
            for (const file of files) {
                const arrayBuffer = await file.arrayBuffer();
                const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                pdfDocs.push(pdfDoc);
            }

            const mergedPdf = await PDFLib.PDFDocument.create();
            for (const pdfDoc of pdfDocs) {
                const copiedPages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                copiedPages.forEach((page) => mergedPdf.addPage(page));
            }

            const pdfBytes = await mergedPdf.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'merged.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>
